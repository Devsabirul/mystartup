<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>LinkedIn Profile Lead Generation Tools</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Vendor CSS -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

    <!-- Main CSS -->
    <link href="assets/css/main.css" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }

        .lead-form-section {
            padding: 6rem 0;
            background: #f7f7f7;
        }

        .lead-form-card {
            background: #fff;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .lead-form-card h1 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #5a0bcf;
            font-weight: 700;
            text-align: center;
        }

        .lead-form-card label {
            font-weight: 500;
        }

        .lead-form-card input,
        .lead-form-card select {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            margin-bottom: 15px;
            border-radius: 6px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }

        .lead-form-card button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(90deg, #5a0bcf, #00d8ff);
            color: #fff;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lead-form-card button:hover {
            transform: translateY(-2px);
            background: linear-gradient(90deg, #00d8ff, #5a0bcf);
        }

        #response-container {
            margin-top: 30px;
            padding: 15px;
            background: #fff;
            color: #000;
            border-radius: 8px;
            max-height: 400px;
            overflow-x: auto;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        th,
        td {
            border: 1px solid #ccc;
            padding: 10px;
        }

        th {
            background-color: #f0f0f0;
            font-weight: 600;
        }

        #download-btn {
            margin-top: 15px;
            padding: 10px 20px;
            background: #00d8ff;
            color: #fff;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: none;
            transition: all 0.3s ease;
        }

        #download-btn:hover {
            background: #5a0bcf;
        }

        nav#navmenu>ul>li>a {
            color: black;
        }

        .scrolled .header {
            --background-color: #5c99ee;
        }

       
    </style>
</head>

<body class="index-page">

    <!-- Navbar/Header -->
    <header id="header" class="header d-flex align-items-center fixed-top">
        <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
            <a href="index.html" class="logo d-flex align-items-center">
                <h1 class="sitename">Devin</h1>
            </a>

            <nav id="navmenu" class="navmenu">
                <ul>
                    <li><a href="index.html" class="active">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#pricing">Pricing</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
            </nav>
        </div>
    </header>

    <!-- Lead Form Section -->
    <section class="lead-form-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="lead-form-card">
                        <h1>LinkedIn Profile Lead Generation</h1>
                        <form id="lead-form">
                            <label for="accountType">Account Type</label>
                            <input type="text" id="accountType" name="accountType" placeholder="e.g., Sales Navigator"
                                required />

                            <label for="location">Location</label>
                            <input type="text" id="location" name="location" placeholder="e.g., New York, USA"
                                required />

                            <label for="numoflead">Number Of Leads</label>
                            <input type="number" id="numoflead" name="numoflead" max="100" placeholder="Max 100"
                                required />

                            <button type="submit">Generate Leads</button>
                        </form>

                        <div id="response-container"></div>
                        <button id="download-btn">⬇️ Download CSV</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Lead Form Script -->
    <script>
        const form = document.getElementById('lead-form');
        const responseContainer = document.getElementById('response-container');
        const downloadBtn = document.getElementById('download-btn');

        form.addEventListener('submit', async function (e) {
            e.preventDefault();
            const formData = new FormData(form);
            const body = Object.fromEntries(formData.entries());

            responseContainer.innerHTML = "⏳ Loading...";
            downloadBtn.style.display = 'none';

            try {
                const res = await fetch('https://n8n.wowvaiya.shop/webhook/lead-form', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(body)
                });

                const json = await res.json();
                displayTable(json);
            } catch (err) {
                responseContainer.innerHTML = `<p style="color:red;">❌ Error: ${err.message}</p>`;
            }
        });

        function displayTable(data) {
            if (!Array.isArray(data)) data = [data];

            if (data.length === 0) {
                responseContainer.innerHTML = "<p>No leads found.</p>";
                return;
            }

            let table = `<table>
      <thead>
        <tr>
          <th>#</th>
          <th>Title</th>
          <th>Followers</th>
          <th>Location</th>
          <th>Job Title</th>
          <th>Company</th>
          <th>Link</th>
        </tr>
      </thead>
      <tbody>`;

            data.forEach((item, index) => {
                table += `<tr>
        <td>${index + 1}</td>
        <td>${item.title ?? ''}</td>
        <td>${item.followersAmount ?? ''}</td>
        <td>${item.location ?? ''}</td>
        <td>${item.jobTitle ?? ''}</td>
        <td>${item.companyName ?? ''}</td>
        <td><a href="${item.url}" target="_blank">Visit</a></td>
      </tr>`;
            });

            table += '</tbody></table>';
            responseContainer.innerHTML = table;

            downloadBtn.style.display = 'inline-block';
            downloadBtn.onclick = () => downloadCSV(data);
        }

        function downloadCSV(data) {
            const headers = ['Title', 'Followers', 'Location', 'Job Title', 'Company', 'Link'];
            const rows = data.map(item => [
                item.title ?? '',
                item.followersAmount ?? '',
                item.location ?? '',
                item.jobTitle ?? '',
                item.companyName ?? '',
                item.url ?? ''
            ]);

            let csvContent = "data:text/csv;charset=utf-8," +
                headers.join(",") + "\n" +
                rows.map(e => e.map(v => `"${v}"`).join(",")).join("\n");

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "linkedin_leads.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>

</body>

</html>